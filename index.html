<html>

<head>
    <title>æµ¸æ°´æ¨å®šå›³+æ´ªæ°´æµ¸æ°´æƒ³å®šåŒºåŸŸ</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src='https://unpkg.com/maplibre-gl@3.1.0/dist/maplibre-gl.js'></script>
    <link href='https://unpkg.com/maplibre-gl@3.1.0/dist/maplibre-gl.css' rel='stylesheet' />
    <script src='maplibre-gl-gsi-terrain.js'></script>
    <script src="https://unpkg.com/pmtiles@2.7.0/dist/index.js"></script>
    <style>
        body {
            margin: 0;
        }

        #map {
            height: 100%;
            width: 100%;
        }

        .map-overlay {
            font: bold 10px/12px 'Helvetica Neue', Arial, Helvetica, sans-serif;
            position: absolute;
            width: 220px;
            bottom: 25px;
            left: 0;
            padding: 5px;
        }

        .map-overlay .map-overlay-inner {
            background-color: #fff;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
            border-radius: 3px;
            padding: 10px;
            margin-bottom: 10px;
        }

        .map-overlay label {
            display: block;
            margin: 0 0 0px;
            font-size: 10px;
            top: 100px;
            left: 10px;
            display: block;
            margin-bottom: 5px;
        }

        .map-overlay input {
            background-color: transparent;
            display: inline-block;
            width: 100%;
            position: relative;
            margin: 0;
            cursor: ew-resize;
        }

        .maplibregl-popup .maplibregl-popup-content {
            padding: 8px 10px;
            font: 12px/14px Arial, Helvetica, sans-serif;
            color: black;
            background: white;
            background: rgba(255, 255, 255, 0.9);
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.4);
            border-radius: 5px;
            width: 200px;
            height: auto;
        }

        .legend-png {
            position: absolute;
            bottom: 210px;
            right: 10px;
            z-index: 1;
            background: white;
            padding: 5px;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
            width: fit-content;
        }

        .image-container {
            display: flex;
            justify-content: center;
        }

        .legend-png img {
            width: 80px;
            height: 200px;
        }

        .legend {
            background-color: rgba(255, 255, 255, 1);
            border-radius: 3px;
            bottom: 50px;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
            font: 10px/12px 'Helvetica Neue', Arial, Helvetica, sans-serif;
            padding: 10px;
            position: absolute;
            right: 10px;
            z-index: 1;
            line-height: 12px;
            height: 130px;
        }

        .legend h4 {
            margin: 0 0 10px;
        }

        .legend div span {
            border-radius: 50%;
            display: inline-block;
            height: 15px;
            margin-right: 10px;
            width: 15px;
            color: orangered
        }

        .square {
            width: 10px;
            height: 10px;
        }

        /*
        #pngtile {
            padding: 3px 4px;
            font: 12px/14px Arial, Helvetica, sans-serif;
            color: black;
            background: white;
            background: rgba(255, 255, 255, 0.9);
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
            border-radius: 5px;
            width: fit-content;
            position: absolute;
            top: 5px;
            z-index: 10;
        }
        */
    </style>
</head>

<body>
    <div id="map"></div>
    <!--
    <div id="pngtile">
        <label><b>æµ¸æ°´æ¨å®šå›³ã®ç¨®é¡</b></label><br>
        <select id="basemaps" onchange="SelectMap()">
            <option value="201807H3007gouu_takahashigawa_dansaizu">å¹³æˆ30å¹´7æœˆè±ªé›¨ æµ¸æ°´æ¨å®šæ®µå½©å›³ï¼ˆç©ºä¸­å†™çœŸåˆ¤èª­ç‰ˆï¼‰ é«˜æ¢å·ï¼ˆå²¡å±±çœŒå€‰æ•·å¸‚ãªã©ï¼‰</option>
            <option value="201807H3007gouu_hijikawa_dansaizu">å¹³æˆ30å¹´7æœˆè±ªé›¨ æµ¸æ°´æ¨å®šæ®µå½©å›³ï¼ˆç©ºä¸­å†™çœŸåˆ¤èª­ç‰ˆï¼‰ è‚±å·ï¼ˆæ„›åª›çœŒå¤§æ´²å¸‚ãªã©ï¼‰</option>
        </select>
    </div>
    -->
    <div class="legend-png">
        <div class="image-container">
            <img src="201807H3007gouu_dansaizu.png" alt="Legend">
        </div>
    </div>
    <div id="legend-flood_l2_shinsuishin" style="display:block;" class='legend'>
        <h4>æ´ªæ°´æµ¸æ°´æƒ³å®šåŒºåŸŸ<br>(æƒ³å®šæœ€å¤§è¦æ¨¡)</h4>
        <div class="square" style='background-color: rgb(220, 122, 220); display: inline-block;'>
        </div><span style="display: inline-block; margin-left: 5px;">20.0mä»¥ä¸Š</span><br>
        <div class="square" style='background-color: rgb(242, 133, 201); display: inline-block;'>
        </div><span style="display: inline-block; margin-left: 5px;">10.0 ï½ 20.0m</span><br>
        <div class="square" style='background-color: rgb(255, 145, 145); display: inline-block;'>
        </div><span style="display: inline-block; margin-left: 5px;">5.0 ï½ 10.0m</span><br>
        <div class="square" style='background-color: rgb(255, 183, 183); display: inline-block;'>
        </div><span style="display: inline-block; margin-left: 5px;">3.0 ï½ 5.0m</span><br>
        <div class="square" style='background-color: rgb(255, 216, 192); display: inline-block;'>
        </div><span style="display: inline-block; margin-left: 5px;">0.5 ï½ 3.0m</span><br>
        <div class="square" style='background-color: rgb(247, 245, 169); display: inline-block;'>
        </div><span style="display: inline-block; margin-left: 5px;">0.5mæœªæº€</span><br>
        <div><img src="location-pin.png" alt="æŒ‡å®šç·Šæ€¥é¿é›£å ´æ‰€" style="width:20px; height:20px;" />æŒ‡å®šç·Šæ€¥é¿é›£å ´æ‰€</div>
    </div>

    <div class="map-overlay top">
        <div class="map-overlay-inner">
            <label>ä¸é€æ˜åº¦</label>
            <label>æµ¸æ°´æ¨å®šå›³: <span id="shinsui-slider-opacity-value">100%</span></label>
            <input id="shinsui-slider-opacity" type="range" min="0" max="100" step="1" value="100">
            <label>æ´ªæ°´æµ¸æ°´æƒ³å®šåŒºåŸŸ(æƒ³å®šæœ€å¤§è¦æ¨¡): <span id="kouzui-slider-opacity-value">100%</span></label>
            <input id="kouzui-slider-opacity" type="range" min="0" max="100" step="1" value="100">
            <!--
            <label>é™°å½±èµ·ä¼å›³: <span id="inei-slider-opacity-value">50%</span></label>
            <input id="inei-slider-opacity" type="range" min="0" max="100" step="1" value="50">
            -->
        </div>
    </div>
    <script type="text/javascript">
        let protocol = new pmtiles.Protocol();
        maplibregl.addProtocol("pmtiles", protocol.tile);

        // æŒ‡å®šç·Šæ€¥é¿é›£å ´æ‰€
        let PM_Hinanbasho_URL = "https://xs489works.xsrv.jp/pmtiles-data/r2kokusei/hinanbasho_v2.pmtiles";

        const p1 = new pmtiles.PMTiles(PM_Hinanbasho_URL)
        protocol.add(p1);

        const map = new maplibregl.Map({
            container: 'map',
            // style: 'building3d.json',
            style: 'std.json',
            // style: 'https://tile2.openstreetmap.jp/styles/osm-bright/style.json',
            zoom: 15.46,
            minZoom: 1,
            maxZoom: 23,
            pitch: 60,
            bearing: -30,
            center: [133.698672, 34.630334],
            hash: true,
            attributionControl: false
        });

        // ã‚ºãƒ¼ãƒ ãƒ»å›è»¢
        map.addControl(new maplibregl.NavigationControl());

        // ãƒ•ãƒ«ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒ¢ãƒ¼ãƒ‰ã®ã‚ªãƒ³ã‚ªãƒ•
        map.addControl(new maplibregl.FullscreenControl());

        // ç¾åœ¨ä½ç½®è¡¨ç¤º
        map.addControl(new maplibregl.GeolocateControl({
            positionOptions: {
                enableHighAccuracy: false
            },
            fitBoundsOptions: { maxZoom: 18 },
            trackUserLocation: true,
            showUserLocation: true
        }));

        // ã‚¹ã‚±ãƒ¼ãƒ«è¡¨ç¤º
        map.addControl(new maplibregl.ScaleControl({
            maxWidth: 200,
            unit: 'metric'
        }));

        // Attributionã‚’æŠ˜ã‚ŠãŸãŸã¿è¡¨ç¤º
        map.addControl(new maplibregl.AttributionControl({
            compact: true,
            customAttribution: 'ï¼ˆ<a href="https://twitter.com/syanseto" target="_blank">Twitter</a> | <a href="https://github.com/shi-works/GSI-Provisional-Inundation-Depth-Map" target="_blank">Github</a>ï¼‰ '
        }));

        // 3Dåœ°å½¢ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«
        map.addControl(
            new maplibregl.TerrainControl({
                source: 'gsidem',
                exaggeration: 1 // æ¨™é«˜ã‚’å¼·èª¿ã™ã‚‹å€ç‡
            })
        );

        map.on('load', () => {
            // æ¨™é«˜ã‚¿ã‚¤ãƒ«
            map.addSource("gsidem", {
                type: 'raster-dem',
                tiles: [
                    'gsidem://https://cyberjapandata.gsi.go.jp/xyz/dem_png/{z}/{x}/{y}.png',
                ],
                attribution: '<a href="https://maps.gsi.go.jp/development/ichiran.html#dem" target="_blank">åœ°ç†é™¢ã‚¿ã‚¤ãƒ«(æ¨™é«˜ã‚¿ã‚¤ãƒ«)</a>',
                tileSize: 256
            });

            // map.setTerrain({ 'source': 'gsidem', 'exaggeration': 1 });

            // é™°å½±èµ·ä¼å›³
            map.addSource("hillshade", {
                type: 'raster',
                tiles: [
                    'https://cyberjapandata.gsi.go.jp/xyz/hillshademap/{z}/{x}/{y}.png',
                ],
                attribution: '<a href="https://maps.gsi.go.jp/development/ichiran.html#hillshademap" target="_blank">åœ°ç†é™¢ã‚¿ã‚¤ãƒ«(é™°å½±èµ·ä¼å›³)</a>',
                tileSize: 256
            });

            map.addLayer({
                id: 'hillshade-tiles',
                type: 'raster',
                source: 'hillshade',
                minzoom: 2,
                maxzoom: 18,
                paint: {
                    'raster-opacity': 0.5
                }
            });

            /*
            // ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã§é™°å½±èµ·ä¼å›³ã®ä¸é€æ˜åº¦ã‚’åˆ¶å¾¡
            const inei_sliderOpactiy = document.getElementById('inei-slider-opacity');
            const inei_sliderOpactiyValue = document.getElementById('inei-slider-opacity-value');

            inei_sliderOpactiy.addEventListener('input', (e) => {
                map.setPaintProperty(
                    'hillshade-tiles',
                    'raster-opacity',
                    parseInt(e.target.value, 10) / 100
                );
                inei_sliderOpactiyValue.textContent = e.target.value + '%';
            });
            */

            // æ´ªæ°´æµ¸æ°´æƒ³å®šåŒºåŸŸï¼ˆæƒ³å®šæœ€å¤§è¦æ¨¡ï¼‰ãƒ©ã‚¹ã‚¿ãƒ¼ã‚¿ã‚¤ãƒ«
            map.addSource("flood_l2_shinsuishin", {
                type: "raster",
                tiles: ["https://disaportaldata.gsi.go.jp/raster/01_flood_l2_shinsuishin_data/{z}/{x}/{y}.png"],
                tileSize: 256,
                "attribution": "<a href='https://disaportal.gsi.go.jp/hazardmap/copyright/opendata.html' target='_blank'>ãƒã‚¶ãƒ¼ãƒ‰ãƒãƒƒãƒ—ãƒãƒ¼ã‚¿ãƒ«ã‚µã‚¤ãƒˆï¼ˆé‡ã­ã‚‹ãƒã‚¶ãƒ¼ãƒ‰ãƒãƒƒãƒ—ï¼‰</a>"
            });

            map.addLayer({
                id: "flood_l2_shinsuishin",
                type: "raster",
                source: "flood_l2_shinsuishin",
                minzoom: 6,
                maxzoom: 18,
                'paint': {
                    'raster-opacity': 1.0
                },
                'layout': {
                    'visibility': 'visible'
                }
            });

            // ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã§æ´ªæ°´æµ¸æ°´æƒ³å®šåŒºåŸŸï¼ˆæƒ³å®šæœ€å¤§è¦æ¨¡ï¼‰ã®ä¸é€æ˜åº¦ã‚’åˆ¶å¾¡
            const kouzui_sliderOpactiy = document.getElementById('kouzui-slider-opacity');
            const kouzui_sliderOpactiyValue = document.getElementById('kouzui-slider-opacity-value');

            kouzui_sliderOpactiy.addEventListener('input', (e) => {
                map.setPaintProperty(
                    'flood_l2_shinsuishin',
                    'raster-opacity',
                    parseInt(e.target.value, 10) / 100
                );
                kouzui_sliderOpactiyValue.textContent = e.target.value + '%';
            });

            // æµ¸æ°´æ¨å®šå›³ãƒ©ã‚¹ã‚¿ãƒ¼ã‚¿ã‚¤ãƒ«
            map.addSource("gsi-shinsui", {
                type: "raster",
                tiles: [
                    "https://cyberjapandata.gsi.go.jp/xyz/201807H3007gouu_kurashiki_0707dansaizu/{z}/{x}/{y}.png"
                ],
                attribution: '<a href="https://maps.gsi.go.jp/development/ichiran.html#t201807H3007gouu_kurashiki_0707dansaizu">å¹³æˆ30å¹´7æœˆè±ªé›¨ æµ¸æ°´æ¨å®šæ®µå½©å›³ï¼ˆé€Ÿå ±ç‰ˆï¼‰ å²¡å±±çœŒå€‰æ•·å¸‚ï¼ˆ2018å¹´7æœˆ7æ—¥æ™‚ç‚¹ï¼‰</a>'
            });

            map.addLayer({
                id: 'gsi-shinsui-tiles',
                type: 'raster',
                source: 'gsi-shinsui',
                minzoom: 6,
                maxzoom: 18,
                paint: {
                    'raster-opacity': 1.0
                }
            });

            // ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã§æµ¸æ°´æ¨å®šå›³ã®ä¸é€æ˜åº¦ã‚’åˆ¶å¾¡
            const shinsui_sliderOpactiy = document.getElementById('shinsui-slider-opacity');
            const shinsui_sliderOpactiyValue = document.getElementById('shinsui-slider-opacity-value');

            shinsui_sliderOpactiy.addEventListener('input', (e) => {
                map.setPaintProperty(
                    'gsi-shinsui-tiles',
                    'raster-opacity',
                    parseInt(e.target.value, 10) / 100
                );
                shinsui_sliderOpactiyValue.textContent = e.target.value + '%';
            });

            // åœ°ç†é™¢åœ°å›³ãƒ™ã‚¯ãƒˆãƒ«ã‚¿ã‚¤ãƒ«
            map.addSource("gsibv-vectortile-source-1-4-16", {
                type: "vector",
                tiles: [
                    "https://cyberjapandata.gsi.go.jp/xyz/experimental_bvmap/{z}/{x}/{y}.pbf"
                ],
                attribution: '<a href="https://github.com/gsi-cyberjapan/gsivectortile-3d-like-building">åœ°ç†é™¢åœ°å›³Vectorï¼ˆä»®ç§°ï¼‰</a>'
            });

            // ã‚¿ãƒ³ã‚¯
            map.addLayer({
                "source": "gsibv-vectortile-source-1-4-16",
                "minzoom": 13,
                "maxzoom": 18,
                "id": "buildings4302",
                "metadata": { "name": "ã‚¿ãƒ³ã‚¯" },
                "type": "fill-extrusion",
                "source-layer": "structurea",
                "filter": ["all", ["==", "ftCode", 4302], ["==", "$type", "Polygon"]],
                "paint": {
                    "fill-extrusion-color": "rgb(0,100,150)",
                    "fill-extrusion-opacity": 0.8,
                    "fill-extrusion-height": 10
                }
            });

            // å·¨å¤§æ§‹é€ ç‰©
            map.addLayer({
                "source": "gsibv-vectortile-source-1-4-16",
                "minzoom": 13,
                "maxzoom": 18,
                "id": "buildings4301",
                "metadata": { "name": "å·¨å¤§æ§‹é€ ç‰©" },
                "type": "fill-extrusion",
                "source-layer": "structurea",
                "filter": ["all", ["==", "ftCode", 4301], ["==", "$type", "Polygon"]],
                "paint": {
                    "fill-extrusion-color": "rgb(0,100,150)",
                    "fill-extrusion-opacity": 0.8,
                    "fill-extrusion-height": 100
                }
            });

            // æ™®é€šç„¡å£èˆ
            map.addLayer({
                "source": "gsibv-vectortile-source-1-4-16",
                "minzoom": 14,
                "maxzoom": 18,
                "id": "buildings3111",
                "metadata": { "name": "æ™®é€šç„¡å£èˆ" },
                "type": "fill-extrusion",
                "source-layer": "building",
                "filter": ["all", ["==", "ftCode", 3111], ["==", "$type", "Polygon"]],
                "paint": {
                    "fill-extrusion-color": "rgb(0,100,150)",
                    "fill-extrusion-opacity": 0.5,
                    "fill-extrusion-height": 10
                }
            });

            // å …ã‚ã†ç„¡å£èˆ
            map.addLayer({
                "source": "gsibv-vectortile-source-1-4-16",
                "minzoom": 13,
                "maxzoom": 18,
                "id": "buildings3112",
                "metadata": { "name": "å …ã‚ã†ç„¡å£èˆ" },
                "type": "fill-extrusion",
                "source-layer": "building",
                "filter": ["all", ["==", "ftCode", 3112], ["==", "$type", "Polygon"]],
                "paint": {
                    "fill-extrusion-color": "rgb(150,200,255)",
                    "fill-extrusion-opacity": 0.5,
                    "fill-extrusion-height": 40
                }
            });

            // æ™®é€šå»ºç‰©
            map.addLayer({
                "source": "gsibv-vectortile-source-1-4-16",
                "minzoom": 14,
                "maxzoom": 18,
                "id": "buildings3101",
                "metadata": { "name": "æ™®é€šå»ºç‰©" },
                "type": "fill-extrusion",
                "source-layer": "building",
                "filter": ["all", ["==", "ftCode", 3101], ["==", "$type", "Polygon"]],
                "paint": {
                    "fill-extrusion-color": "rgb(0,100,150)",
                    "fill-extrusion-opacity": 0.8,
                    "fill-extrusion-height": 10
                }
            });

            // å …ã‚ã†å»ºç‰©
            map.addLayer({
                "source": "gsibv-vectortile-source-1-4-16",
                "minzoom": 13,
                "maxzoom": 18,
                "id": "buildings3102",
                "metadata": { "name": "å …ã‚ã†å»ºç‰©" },
                "type": "fill-extrusion",
                "source-layer": "building",
                "filter": ["all", ["==", "ftCode", 3102], ["==", "$type", "Polygon"]],
                "paint": {
                    "fill-extrusion-color": "rgb(150,200,255)",
                    "fill-extrusion-opacity": 0.8,
                    "fill-extrusion-height": 40
                }
            });

            // é«˜å±¤å»ºç‰©
            map.addLayer({
                "source": "gsibv-vectortile-source-1-4-16",
                "minzoom": 13,
                "maxzoom": 18,
                "id": "buildings3103",
                "metadata": { "name": "é«˜å±¤å»ºç‰©" },
                "type": "fill-extrusion",
                "source-layer": "building",
                "filter": ["all", ["==", "ftCode", 3103], ["==", "$type", "Polygon"]],
                "paint": {
                    "fill-extrusion-color": "rgb(0,255,255)",
                    "fill-extrusion-opacity": 0.8,
                    "fill-extrusion-height": 100
                }
            });

            // æŒ‡å®šç·Šæ€¥é¿é›£å ´æ‰€ãƒ™ã‚¯ãƒˆãƒ«ã‚¿ã‚¤ãƒ«ï¼ˆPMTilesï¼‰
            map.addSource("pmtiles-hinan", {
                type: "vector",
                url: "pmtiles://" + PM_Hinanbasho_URL,
                attribution: '<a href="https://www.gsi.go.jp/bousaichiri/hinanbasho.html">æŒ‡å®šç·Šæ€¥é¿é›£å ´æ‰€ãƒ‡ãƒ¼ã‚¿ï¼ˆå›½åœŸåœ°ç†é™¢Webã‚µã‚¤ãƒˆï¼‰ã‚’åŠ å·¥ã—ã¦ä½œæˆ</a>'
            });

            map.loadImage('./location-pin.png', // location-pinã‚¢ã‚¤ã‚³ãƒ³ã®URLã‚’æŒ‡å®š
                function (error, image) {
                    if (error) throw error;
                    map.addImage('location-pin', image); // 'location-pin'ã¨ã„ã†åå‰ã§ã‚¢ã‚¤ã‚³ãƒ³ã‚’è¿½åŠ 
                }
            );

            // æŒ‡å®šç·Šæ€¥é¿é›£å ´æ‰€ã‚·ãƒ³ãƒœãƒ«ãƒ¬ã‚¤ãƒ¤
            map.addLayer({
                "id": "hinanbasho-1",
                "source": "pmtiles-hinan",
                "source-layer": "hinanbasho",
                "type": "symbol", // typeã‚’'symbol'ã«å¤‰æ›´
                "layout": {
                    "icon-image": "location-pin", // ä½¿ç”¨ã™ã‚‹ã‚¢ã‚¤ã‚³ãƒ³åã‚’æŒ‡å®š
                    // å¿…è¦ã«å¿œã˜ã¦ã€ã‚¢ã‚¤ã‚³ãƒ³ã®ã‚µã‚¤ã‚ºã‚’èª¿æ•´ã™ã‚‹
                    "icon-size": 0.5 // ã‚¢ã‚¤ã‚³ãƒ³ã®å¤§ãã•ã‚’å¤‰æ›´ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
                }
            });

            // ãƒ•ã‚£ãƒ«ã‚¿è¨­å®š
            map.setFilter('hinanbasho-1', ['==', 'æ´ªæ°´', '1']);

            // æŒ‡å®šç·Šæ€¥é¿é›£å ´æ‰€ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—è¡¨ç¤º
            map.on('click', 'hinanbasho-1', (e) => {
                var lng = e.lngLat.lng;
                var lat = e.lngLat.lat;
                var jusho = e.features[0].properties['ä½æ‰€'];
                var shisetsumei = e.features[0].properties['æ–½è¨­ãƒ»å ´æ‰€å'];
                var chofuku = e.features[0].properties['æŒ‡å®šé¿é›£æ‰€ã¨ã®é‡è¤‡'];

                var SyubetuIds = ["æ´ªæ°´", "å´–å´©ã‚Œã€åœŸçŸ³æµåŠã³åœ°æ»‘ã‚Š", "é«˜æ½®", "æ´¥æ³¢", "å¤§è¦æ¨¡ãªç«äº‹", "å†…æ°´æ°¾æ¿«", "ç«å±±ç¾è±¡"];
                var SyubetuMei = ''
                for (var j = 0; j < SyubetuIds.length; j++) {

                    if (e.features[0].properties[SyubetuIds[j]] === '1') {
                        SyubetuMei += SyubetuIds[j] + "ã€€"
                    }
                }

                if (chofuku === '1') { res_chofuku = "ã€‡"; } else { res_chofuku = "-"; }

                new maplibregl.Popup()
                    .setLngLat(e.lngLat)
                    .setHTML(
                        '<b>' + '<big>' + '<font color="red">' + shisetsumei + '</font>' + '</big>' + '</b>' + '<br>'
                        + 'ä½æ‰€: ' + jusho + '<br>'
                        + '<a href=\https://www.google.com/maps?q=' + lat + "," + lng + "&hl=ja' target='_blank'>ğŸŒGoogle Maps</a>"
                        + '<br><br>'
                        + '<b>' + '<big>' + 'å¯¾å¿œã—ã¦ã„ã‚‹ç½å®³ã®ç¨®åˆ¥' + '</big>' + '</b>' + '<br>' + SyubetuMei + '<br><br>'
                        + 'æŒ‡å®šé¿é›£æ‰€ã¨ã®é‡è¤‡: ' + res_chofuku + '<br><br>'
                        + '<b>' + 'â€»æœ€æ–°ã‹ã¤è©³ç´°ã®çŠ¶æ³ãªã©ã¯å¿…ãšå½“è©²å¸‚ç”ºæ‘ã«ã”ç¢ºèªãã ã•ã„ã€‚' + '</b>' + '<br>'
                        + '<a href=https://www.gsi.go.jp/bousaichiri/hinanbasho.html>ã€ŒæŒ‡å®šç·Šæ€¥é¿é›£å ´æ‰€ã€ã«ã¤ã„ã¦</a>')
                    .addTo(map);

            });

            // map.showTileBoundaries = true;

        })
    </script>
</body>

</html>